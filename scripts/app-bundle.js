define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!0,testing:!1,apiBaseUrl:"https://chatle-server.herokuapp.com",redirectPath:""}}),define("config/settings",["require","exports"],function(e,t){"use strict";var n=function(){function e(){this.apiBaseUrl="http://localhost:5000",this.userAPI="/api/users",this.convAPI="/api/chat/conv",this.chatAPI="/api/chat",this.accountdAPI="/account"}return e}();t.Settings=n}),define("services/state",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.State=n}),define("model/serviceError",["require","exports"],function(e,t){"use strict";var n=(function(){function e(){}return e}(),function(){function e(){}return e}(),function(){function e(){}return e}());t.ServiceError=n}),define("model/attendee",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.userId=e}return e}();t.Attendee=n}),define("model/message",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.Message=n}),define("model/user",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.User=n}),define("model/conversation",["require","exports","./attendee"],function(e,t,n){"use strict";var r=function(){function e(e){if(e){var t=new Array;t.push(new n.Attendee(e.id)),this.attendees=t,this.messages=new Array,this.isInitiatedByUser=!0}}return e}();t.Conversation=r});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/helpers",["require","exports","aurelia-framework","./state"],function(e,t,n,r){"use strict";var i=function(){function e(e){this.state=e,this.location=window.location}return e.prototype.getError=function(e){var t=e.content,n=t[0],r=new Error(n.errors[0].errorMessage);return r.name=n.key,r},e.prototype.setConverationTitle=function(e){var t=this;if(!e.title){var n="";e.attendees.forEach(function(e){e&&e.userId&&e.userId!==t.state.userName&&(n+=e.userId+" ")}),e.title=n.trim()}},e.prototype.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(this.location.search);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},e=__decorate([n.autoinject,__metadata("design:paramtypes",[r.State])],e)}();t.Helpers=i}),define("events/connectionStateChanged",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.state=e}return e}();t.ConnectionStateChanged=n}),define("events/conversationJoined",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.conversation=e}return e}();t.ConversationJoined=n}),define("events/messageReceived",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.message=e}return e}();t.MessageReceived=n}),define("events/userConnected",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.user=e}return e}();t.UserConnected=n}),define("events/userDisconnected",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.user=e}return e}();t.UserDisconnected=n});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/chat.service",["require","exports","aurelia-event-aggregator","aurelia-http-client","aurelia-framework","../environment","../config/settings","./helpers","./state","../events/connectionStateChanged","../events/conversationJoined","../events/messageReceived","../events/userConnected","../events/userDisconnected"],function(e,t,n,r,i,o,s,a,c,u,l,f,d,p){"use strict";!function(e){e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Error=3]="Error"}(t.ConnectionState||(t.ConnectionState={}));var h=t.ConnectionState,v=function(){function e(e,t,n,r,i){this.settings=e,this.ea=t,this.http=n,this.state=r,this.helpers=i,this.currentState=h.Disconnected}return e.prototype.start=function(){var e=this,t=o.default.debug,n=jQuery.connection.hub;n.logging=t,n.url=this.settings.apiBaseUrl+"/signalr";var r=jQuery.connection,i=r.chat;return i.client.userConnected=function(t){return e.onUserConnected(t)},i.client.userDisconnected=function(t){return e.onUserDisconnected(t)},i.client.messageReceived=function(t){return e.onMessageReceived(t)},i.client.joinConversation=function(t){return e.onJoinConversation(t)},t&&n.stateChanged(function(e){var t,n,r=jQuery.signalR;for(var i in r.connectionState)r.connectionState[i]===e.oldState&&(t=i),r.connectionState[i]===e.newState&&(n=i);console.log("Chat Hub state changed from "+t+" to "+n)}),n.reconnected(function(){return e.onReconnected()}),n.error(function(t){return e.onError(t)}),n.disconnected(function(){return e.onDisconnected()}),new Promise(function(t,r){n.start().done(function(){e.setConnectionState(h.Connected),t(h.Connected)}).fail(function(t){e.setConnectionState(h.Error),r(new Error(t))})})},e.prototype.stop=function(){jQuery.connection.hub.stop()},e.prototype.setConnectionState=function(e){this.currentState!==e&&(console.log("connection state changed to: "+e),this.currentState=e,this.ea.publish(new u.ConnectionStateChanged(e)))},e.prototype.onReconnected=function(){this.setConnectionState(h.Connected)},e.prototype.onDisconnected=function(){this.setConnectionState(h.Disconnected)},e.prototype.onError=function(e){this.setConnectionState(h.Error)},e.prototype.onUserConnected=function(e){console.log("Chat Hub new user connected: "+e.id),this.ea.publish(new d.UserConnected(e))},e.prototype.onUserDisconnected=function(e){console.log("Chat Hub user disconnected: "+e.id),e.id!==this.state.userName&&this.ea.publish(new p.UserDisconnected(e))},e.prototype.onMessageReceived=function(e){this.ea.publish(new f.MessageReceived(e))},e.prototype.onJoinConversation=function(e){this.helpers.setConverationTitle(e),this.ea.publish(new l.ConversationJoined(e))},e=__decorate([i.autoinject,__metadata("design:paramtypes",[s.Settings,n.EventAggregator,r.HttpClient,c.State,a.Helpers])],e)}();t.ChatService=v}),define("model/provider",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.Provider=n});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/login.service",["require","exports","aurelia-http-client","aurelia-framework","../config/settings","./chat.service","./helpers","./state"],function(e,t,n,r,i,o,s,a){"use strict";var c=function(){function e(e,t,n,r,i){this.http=e,this.settings=t,this.chatService=n,this.state=r,this.helpers=i}return e.prototype.getXhrf=function(e){var t=this;return new Promise(function(n,r){e?t.http.get("cls").then(function(){return t.setXhrf(n,r)}).catch(function(e){return r(new Error("the service is down"))}):t.xhrf?n(t.xhrf):t.setXhrf(n,r)})},e.prototype.login=function(e){var t=this;return this.state.isGuess=!0,new Promise(function(n,r){t.getXhrf().then(function(i){t.state.isGuess&&t.loginAsGuess(e,n,r)}).catch(function(e){return r(e)})})},e.prototype.logoff=function(){var e=this;this.state.userName&&(this.chatService.stop(),this.getXhrf().then(function(t){e.http.post(e.settings.accountdAPI+"/spalogoff",null)}),this.xhrf=void 0,this.state.userName=void 0)},e.prototype.exists=function(e){var t=this;return new Promise(function(n,r){return e?void t.getXhrf().then(function(i){t.http.get(t.settings.accountdAPI+"/exists?userName="+encodeURIComponent(e)).then(function(e){n(e.content)}).catch(function(e){t.manageError(e,r,new Error("the service is down"))})}).catch(function(e){return r(new Error("the service is down"))}):void n(!1)})},e.prototype.confirm=function(e){var t=this;return new Promise(function(n,r){t.getXhrf().then(function(i){t.http.put(t.settings.accountdAPI+"/spaExternalLoginConfirmation",{userName:e}).then(function(i){t.logged(e,n,r),sessionStorage.setItem("userName",e)}).catch(function(e){return t.manageError(e,r,t.helpers.getError(e))})}).catch(function(e){return r(new Error("the service is down"))})})},e.prototype.getExternalLoginProviders=function(){var e=this;return new Promise(function(t,n){e.getXhrf().then(function(r){e.http.get(e.settings.accountdAPI+"/getExternalProviders").then(function(e){t(e.content)}).catch(function(t){return e.manageError(t,n,e.helpers.getError(t))})}).catch(function(e){return n(new Error("the service is down"))})})},e.prototype.setXhrf=function(e,t){var n=this;this.http.get("xhrf").then(function(t){n.xhrf=t.response,n.http.configure(function(e){e.withHeader("X-XSRF-TOKEN",n.xhrf)}),e(n.xhrf)}).catch(function(e){return t(new Error("the service is down"))})},e.prototype.loginAsGuess=function(e,t,n){var r=this;this.http.post(this.settings.accountdAPI+"/spaguess",{userName:e}).then(function(i){r.logged(e,t,n)}).catch(function(e){r.manageError(e,n,r.helpers.getError(e))})},e.prototype.logged=function(e,t,n){this.state.userName=e,this.setXhrf(t,n)},e.prototype.manageError=function(e,t,n){this.xhrf=void 0,t(n)},e=__decorate([r.autoinject,__metadata("design:paramtypes",[n.HttpClient,i.Settings,o.ChatService,a.State,s.Helpers])],e)}();t.LoginService=c});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("app",["require","exports","aurelia-framework","aurelia-router","aurelia-event-aggregator","aurelia-http-client","./environment","./services/login.service","./services/state","./events/connectionStateChanged","./config/settings","./services/helpers"],function(e,t,n,r,i,o,s,a,c,u,l,f){"use strict";var d=function(){function e(e,t,n,r,i,o){this.service=e,this.ea=t,this.state=n,this.helpers=r,i.apiBaseUrl=s.default.apiBaseUrl,o.configure(function(e){return e.withBaseUrl(s.default.apiBaseUrl).withCredentials(!0)}),n.userName=sessionStorage.getItem("userName")}return e.prototype.configureRouter=function(e,t){var n=this;e.title="Chatle",e.addPipelineStep("authorize",p);var r={route:"confirm",name:"confirm",moduleId:"pages/confirm",title:"Confirm",anomymous:!0},i={route:"login",name:"login",moduleId:"pages/login",title:"Login",anomymous:!0},o={route:"account",name:"account",moduleId:"pages/account",title:"Account"},s={route:"home",name:"home",moduleId:"pages/home",title:"Home"};e.map([s,o,r,i]);var a=function(e){var t=n.helpers.getUrlParameter("p");if(t)return r;var a=n.helpers.getUrlParameter("u"),c=n.helpers.getUrlParameter("a");return a&&(n.state.userName=a,sessionStorage.setItem("userName",a)),window.history.replaceState(null,null,"/"),n.state.userName?c?o:s:i};e.mapUnknownRoutes(a),this.router=t},e.prototype.attached=function(){var e=this;this.ea.subscribe(u.ConnectionStateChanged,function(t){e.setIsConnected()}),this.setIsConnected()},e.prototype.logoff=function(){this.service.logoff(),this.router.navigateToRoute("login"),this.isConnected=!1},e.prototype.manage=function(){this.router.navigateToRoute("account")},e.prototype.home=function(){this.isConnected?this.router.navigateToRoute("home"):this.router.navigateToRoute("login")},e.prototype.setIsConnected=function(){this.isConnected=void 0!==this.state.userName&&null!=this.state.userName&&"pages/confirm"!=this.router.currentInstruction.config.moduleId,this.userName=this.state.userName},e=__decorate([n.autoinject,__metadata("design:paramtypes",[a.LoginService,i.EventAggregator,c.State,f.Helpers,l.Settings,o.HttpClient])],e)}();t.App=d;var p=function(){function e(e,t){this.state=e,this.helpers=t}return e.prototype.run=function(e,t){if(e.getAllInstructions().some(function(e){var t=e.config;return!t.anomymous})){var n=this.state.userName;if(!n)return t.cancel(new r.Redirect("login"))}return t()},e=__decorate([n.autoinject,__metadata("design:paramtypes",[c.State,f.Helpers])],e)}()}),define("main",["require","exports","aurelia-framework","aurelia-logging-console","./environment"],function(e,t,n,r,i){"use strict";function o(e){e.use.standardConfiguration().feature("resources").plugin("aurelia-validation"),i.default.debug&&e.use.developmentLogging(),i.default.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot()})}i.default.debug&&(n.LogManager.addAppender(new r.ConsoleAppender),n.LogManager.setLevel(n.LogManager.logLevel.debug)),Promise.config({warnings:{wForgottenReturn:!1}}),t.configure=o});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/user.service",["require","exports","aurelia-http-client","aurelia-framework","../config/settings","./state"],function(e,t,n,r,i,o){"use strict";var s=function(){function e(e,t,n){this.http=e,this.settings=t,this.state=n}return e.prototype.getUsers=function(){var e=this;return new Promise(function(t,n){e.http.get(e.settings.userAPI).then(function(e){var n=e.content;n&&n.users&&t(n.users)}).catch(function(e){return n(new Error("the service is down"))})})},e=__decorate([r.autoinject,__metadata("design:paramtypes",[n.HttpClient,i.Settings,o.State])],e)}();t.UserService=s});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/contact-list",["require","exports","aurelia-framework","aurelia-event-aggregator","../services/chat.service","../services/user.service","../services/chat.service","../events/userConnected","../events/userDisconnected","../events/connectionStateChanged"],function(e,t,n,r,i,o,s,a,c,u){"use strict";var l=function(){function e(e,t,n){this.userService=e,this.chatService=t,this.ea=n,this.loadingMessage="loading..."}return e.prototype.attached=function(){var e=this;this.connectionStateChangeSubscription=this.ea.subscribe(u.ConnectionStateChanged,function(t){t.state===i.ConnectionState.Connected&&e.getUser()}),this.chatService.currentState===i.ConnectionState.Connected&&this.getUser()},e.prototype.detached=function(){this.connectionStateChangeSubscription.dispose(),this.userConnectedSubscription&&this.userConnectedSubscription.dispose(),this.userDisconnectedSubscription&&this.userDisconnectedSubscription.dispose()},e.prototype.getUser=function(){var e=this;this.userService.getUsers().then(function(t){e.users=t,e.userConnectedSubscription=e.ea.subscribe(a.UserConnected,function(t){var n=t;e.removeUser(n.user.id),e.users.unshift(n.user)}),e.userDisconnectedSubscription=e.ea.subscribe(c.UserDisconnected,function(t){e.removeUser(t.user.id)})}).catch(function(t){return e.loadingMessage=t.message})},e.prototype.removeUser=function(e){var t;if(this.users.forEach(function(n){n.id===e&&(t=n)}),t){var n=this.users.indexOf(t);this.users.splice(n,1)}},e=__decorate([n.autoinject,__metadata("design:paramtypes",[o.UserService,s.ChatService,r.EventAggregator])],e)}();t.ContactList=l}),define("events/conversationSelected",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.conversation=e}return e}();t.ConversationSelected=n});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/conversation.service",["require","exports","aurelia-event-aggregator","aurelia-http-client","aurelia-framework","../config/settings","./state","./helpers","../model/message","../events/conversationSelected","../events/conversationJoined"],function(e,t,n,r,i,o,s,a,c,u,l){"use strict";var f=function(){function e(e,t,n,r,i){this.http=e,this.settings=t,this.state=n,this.helpers=r,this.ea=i}return e.prototype.showConversation=function(e,t){t.currentInstruction.fragment!=="conversation/"+e.title&&(this.currentConversation=e,this.helpers.setConverationTitle(e),this.ea.publish(new u.ConversationSelected(e)),t.navigateToRoute("conversation",{id:e.title}))},e.prototype.sendMessage=function(e,t){var n=this,r=new c.Message;if(r.conversationId=e.id,r.from=this.state.userName,r.text=t,e.id)return new Promise(function(i,o){n.http.post(n.settings.chatAPI,{to:e.id,text:t}).then(function(t){e.messages.unshift(r),i(r)}).catch(function(e){return o(n.helpers.getError(e))})});var i;return e.attendees.forEach(function(e){e.userId!==n.state.userName&&(i=e)}),new Promise(function(o,s){n.http.post(n.settings.convAPI,{to:i.userId,text:t}).then(function(t){e.id=t.content,n.ea.publish(new l.ConversationJoined(e)),e.messages.unshift(r),o(r)}).catch(function(e){return s(n.helpers.getError(e))})})},e.prototype.getConversations=function(){var e=this;return new Promise(function(t,n){e.http.get(e.settings.chatAPI).then(function(n){if(n.response){var r=n.content;if(r){var i=r;return i.forEach(function(t){return e.helpers.setConverationTitle(t)}),void t(i)}}t(null)}).catch(function(e){return n(new Error("The service is down"))})})},e=__decorate([i.autoinject,__metadata("design:paramtypes",[r.HttpClient,o.Settings,s.State,a.Helpers,n.EventAggregator])],e)}();t.ConversationService=f});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/contact",["require","exports","aurelia-framework","aurelia-event-aggregator","aurelia-router","../services/conversation.service","../services/state","../model/user","../model/conversation","../events/conversationSelected"],function(e,t,n,r,i,o,s,a,c,u){"use strict";var l=function(){function e(e,t,n,r){this.service=e,this.state=t,this.ea=n,this.router=r}return Object.defineProperty(e.prototype,"isCurrentUser",{get:function(){return this.state.userName===this.user.id},enumerable:!0,configurable:!0}),e.prototype.select=function(){this.isCurrentUser||(this.user.conversation||(this.user.conversation=new c.Conversation(this.user)),this.service.showConversation(this.user.conversation,this.router))},e.prototype.attached=function(){var e=this;this.conversationSelectedSubscription=this.ea.subscribe(u.ConversationSelected,function(t){var n=t.conversation,r=n.attendees;e.isSelected=!1,r.length<3&&r.forEach(function(t){t.userId!==e.state.userName&&t.userId===e.user.id&&(e.isSelected=!0)})})},e.prototype.detached=function(){this.conversationSelectedSubscription.dispose()},__decorate([n.bindable,__metadata("design:type",a.User)],e.prototype,"user",void 0),e=__decorate([n.autoinject,__metadata("design:paramtypes",[o.ConversationService,s.State,r.EventAggregator,i.Router])],e)}();t.Contact=l});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/conversation-component",["require","exports","aurelia-framework","aurelia-router","../services/conversation.service"],function(e,t,n,r,i){"use strict";var o=function(){function e(e,t){this.service=e,this.router=t}return e.prototype.activate=function(e,t){e||delete this.service.currentConversation,this.conversation=this.service.currentConversation,this.conversation?t.navModel.setTitle(this.conversation.title):this.router.navigateToRoute("home")},e.prototype.sendMessage=function(){this.service.sendMessage(this.conversation,this.message),this.message=""},e=__decorate([n.autoinject,__metadata("design:paramtypes",[i.ConversationService,r.Router])],e)}();t.ConversationComponent=o});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/conversation-list",["require","exports","aurelia-framework","aurelia-event-aggregator","../services/chat.service","../services/conversation.service","../services/state","../events/conversationJoined","../events/userDisconnected","../events/connectionStateChanged"],function(e,t,n,r,i,o,s,a,c,u){"use strict";var l=function(){function e(e,t,n){this.service=e,this.state=t,this.ea=n}return e.prototype.attached=function(){var e=this;this.conversations=new Array,this.getConversations(),this.connectionStateSubscription=this.ea.subscribe(u.ConnectionStateChanged,function(t){var n=t.state;n===i.ConnectionState.Disconnected?e.conversations.splice(e.conversations.length):n===i.ConnectionState.Connected&&e.getConversations()})},e.prototype.detached=function(){this.Unsubscribe(),this.connectionStateSubscription.dispose()},e.prototype.Unsubscribe=function(){this.conversationJoinedSubscription&&this.conversationJoinedSubscription.dispose(),this.userDisconnectedSubscription&&this.userDisconnectedSubscription.dispose()},e.prototype.getConversations=function(){var e=this;this.service.getConversations().then(function(t){e.Unsubscribe(),t&&(e.conversations=t,e.userDisconnectedSubscription=e.ea.subscribe(c.UserDisconnected,function(t){e.conversations.forEach(function(n){var r=n.attendees;2===r.length&&r.forEach(function(r){var i=t.user;if(i.isRemoved&&r.userId===i.id){var o=e.conversations.indexOf(n),s=e.conversations[o];e.conversations.splice(o,1),e.service.currentConversation===s&&delete e.service.currentConversation}})})}),e.conversationJoinedSubscription=e.ea.subscribe(a.ConversationJoined,function(t){t.conversation;e.conversations.unshift(t.conversation)}))})},e=__decorate([n.autoinject,__metadata("design:paramtypes",[o.ConversationService,s.State,r.EventAggregator])],e)}();t.ConversationList=l});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/conversation-preview",["require","exports","aurelia-framework","aurelia-event-aggregator","aurelia-router","../services/conversation.service","../model/conversation","../events/conversationSelected","../events/messageReceived"],function(e,t,n,r,i,o,s,a,c){"use strict";var u=function(){function e(e,t,n){this.service=e,this.ea=t,this.router=n}return e.prototype.select=function(){this.service.showConversation(this.conversation,this.router)},e.prototype.attached=function(){var e=this;this.lastMessage=this.conversation.messages[0].text,this.isSelected=this.conversation&&this.conversation.isInitiatedByUser,this.conversationSelectedSubscription=this.ea.subscribe(a.ConversationSelected,function(t){t.conversation.id===e.conversation.id?e.isSelected=!0:e.isSelected=!1}),this.messageReceivedSubscription=this.ea.subscribe(c.MessageReceived,function(t){var n=t.message;n.conversationId===e.conversation.id&&(e.conversation.messages.unshift(n),e.lastMessage=n.text)})},e.prototype.detached=function(){this.conversationSelectedSubscription.dispose(),this.messageReceivedSubscription.dispose()},__decorate([n.bindable,__metadata("design:type",s.Conversation)],e.prototype,"conversation",void 0),e=__decorate([n.autoinject,__metadata("design:paramtypes",[o.ConversationService,r.EventAggregator,i.Router])],e)}();t.ConversationPreview=u});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/user-name",["require","exports","aurelia-framework","aurelia-validation","../services/login.service","../services/state"],function(e,t,n,r,i,o){"use strict";var s=function(){function e(e,t,n){this.service=e,this.state=t,this.controller=n.createForCurrentScope(),this.controller.validateTrigger="change"}return e.prototype.attached=function(){this.userName=this.state.userName},e.prototype.userNameAvailable=function(e){var t=this;return new Promise(function(n){t.service.exists(e).then(function(r){n(!r),t.state.userName=e})})},__decorate([n.bindable({defaultBindingMode:n.bindingMode.twoWay}),__metadata("design:type",String)],e.prototype,"userName",void 0),e=__decorate([n.autoinject,n.customElement("user-name"),__metadata("design:paramtypes",[i.LoginService,o.State,r.ValidationControllerFactory])],e)}();t.UserName=s,r.ValidationRules.ensure(function(e){return e.userName}).satisfies(function(e,t){return t.userNameAvailable(e)}).withMessage("This user name already exists, please choose another one").satisfiesRule("required").on(s)}),define("model/changePassword",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.ChangePassword=n}),define("model/manage-logins",["require","exports"],function(e,t){"use strict";var n=(function(){function e(){}return e}(),function(){function e(){}return e}());t.UserLogiAuthenticationDescriptionnInfo=n;var r=function(){function e(){}return e}();t.ManageLogins=r});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/account.service",["require","exports","aurelia-http-client","aurelia-framework","../config/settings","./state","./helpers"],function(e,t,n,r,i,o,s){"use strict";var a=function(){function e(e,t,n,r){this.http=e,this.settings=t,this.state=n,this.helpers=r}return e.prototype.getLogins=function(){var e=this;return new Promise(function(t,n){e.http.get(e.settings.accountdAPI+"/logins").then(function(e){t(e.content)}).catch(function(e){return n(new Error("The service is down"))})})},e.prototype.removeLogin=function(e,t){var n=this;return new Promise(function(r,i){n.http.delete(n.settings.accountdAPI+"/sparemoveLogin?loginProvider="+encodeURIComponent(e)+"&providerKey="+encodeURIComponent(t)).then(function(){r()}).catch(function(e){return i(n.helpers.getError(e))})})},e=__decorate([r.autoinject,__metadata("design:paramtypes",[n.HttpClient,i.Settings,o.State,s.Helpers])],e)}();t.AccountService=a});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("pages/account",["require","exports","aurelia-framework","aurelia-router","aurelia-event-aggregator","../services/chat.service","../services/state","../services/account.service","../services/login.service","../model/manage-logins","../events/connectionStateChanged","../config/settings","../services/helpers"],function(e,t,n,r,i,o,s,a,c,u,l,f,d){"use strict";var p=function(){function e(e,t,n,r,i,o,s){this.accountService=e,this.loginService=t,this.router=n,this.ea=r,this.state=i,this.externalLinkLogin=o.apiBaseUrl+o.accountdAPI+"/linklogin?returnUrl="+encodeURIComponent(location.protocol+"//"+location.host+"?a=account&u="+encodeURIComponent(this.state.userName))}return e.prototype.remove=function(e,t){var n=this;this.accountService.removeLogin(e,t).then(function(){var r=n.logins.currentLogins,i=r.findIndex(function(n){return n.loginProvider===e&&n.providerKey===t});r.splice(i,1);var o=new u.UserLogiAuthenticationDescriptionnInfo;o.authenticationScheme=o.displayName=e,n.logins.otherLogins.push(o)}).catch(function(e){return n.errorMessage=e.message})},e.prototype.attached=function(){var e=this;this.connectionStateSubscription=this.ea.subscribe(l.ConnectionStateChanged,function(t){t.state===o.ConnectionState.Connected&&e.getLogins();
}),this.getLogins()},e.prototype.detached=function(){this.connectionStateSubscription.dispose()},e.prototype.getLogins=function(){var e=this;this.loginService.getXhrf().then(function(t){e.token=t,e.accountService.getLogins().then(function(t){return e.logins=t}).catch(function(t){return e.errorMessage=t.message})}).catch(function(t){return e.errorMessage=t.message})},e=__decorate([n.autoinject,__metadata("design:paramtypes",[a.AccountService,c.LoginService,r.Router,i.EventAggregator,s.State,f.Settings,d.Helpers])],e)}();t.Account=p});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("pages/confirm",["require","exports","aurelia-framework","aurelia-router","aurelia-validation","../services/login.service","../services/helpers","../services/state"],function(e,t,n,r,i,o,s,a){"use strict";var c=function(){function e(e,t,n,r,i){this.service=e,this.router=t,this.helpers=n,this.state=r,this.controller=i.createForCurrentScope(),this.provider=this.helpers.getUrlParameter("p"),r.userName=this.helpers.getUrlParameter("u"),window.history.replaceState(null,null,"/")}return e.prototype.confirm=function(){var e=this;this.controller.validate().then(function(){e.service.confirm(e.state.userName).then(function(){e.router.navigateToRoute("home")}).catch(function(t){"NullInfo"===t.name?e.router.navigateToRoute("login"):e.error=t})}).catch(function(t){return e.error=t})},e=__decorate([n.autoinject,__metadata("design:paramtypes",[o.LoginService,r.Router,s.Helpers,a.State,i.ValidationControllerFactory])],e)}();t.Confirm=c}),define("services/notification.service",["require","exports","../events/messageReceived"],function(e,t,n){"use strict";var r=function(){function e(e){this.ea=e}return e.prototype.start=function(){var e=this;window.Notification&&("granted"===Notification.permission?this.listen():"denied"!==Notification.permission&&Notification.requestPermission().then(function(t){"granted"===t&&e.listen()}))},e.prototype.stop=function(){this.subscription&&this.subscription.dispose()},e.prototype.listen=function(){this.subscription=this.ea.subscribe(n.MessageReceived,function(e){var t=e.message,n={body:t.text,icon:"favicon.ico"},r=new Notification(t.from,n);r.onclick=function(){}})},e}();t.NotificationService=r});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("pages/home",["require","exports","aurelia-framework","aurelia-event-aggregator","../services/chat.service","../services/notification.service","../events/connectionStateChanged"],function(e,t,n,r,i,o,s){"use strict";var a=function(){function e(e,t){this.chatService=e,this.ea=t,this.notification=new o.NotificationService(t)}return e.prototype.configureRouter=function(e,t){e.map([{route:["","conversation/:id"],name:"conversation",moduleId:"../components/conversation-component"}]),this.router=t},e.prototype.attached=function(){var e=this;this.connectionStateSubscription=this.ea.subscribe(s.ConnectionStateChanged,function(t){e.setIsDisconnected(t.state)}),this.setIsDisconnected(this.chatService.currentState),this.chatService.currentState!==i.ConnectionState.Connected&&this.chatService.start()},e.prototype.detached=function(){this.connectionStateSubscription.dispose()},e.prototype.setIsDisconnected=function(e){e===i.ConnectionState.Error&&(this.router.navigateToRoute("login"),this.notification.stop()),e===i.ConnectionState.Disconnected?(this.isDisconnected=!0,this.notification.stop()):(this.isDisconnected=!1,this.notification.start())},e=__decorate([n.autoinject,__metadata("design:paramtypes",[i.ChatService,r.EventAggregator])],e)}();t.Home=a});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("pages/login",["require","exports","aurelia-framework","aurelia-router","../services/login.service","../config/settings","../services/state","../environment"],function(e,t,n,r,i,o,s,a){"use strict";var c=function(){function e(e,t,n,r){this.service=e,this.router=t,this.state=n;var i=window.location;this.externalLogin=r.apiBaseUrl+r.accountdAPI+"/externalLogin?returnUrl="+encodeURIComponent(i.protocol+"//"+i.host+a.default.redirectPath)}return e.prototype.login=function(){var e=this;this.service.login(this.state.userName).then(function(){e.router.navigateToRoute("home")}).catch(function(t){e.error=t})},e.prototype.activate=function(){var e=this;this.service.logoff(),this.service.getXhrf(!0).then(function(t){e.token=t,e.service.getExternalLoginProviders().then(function(t){return e.providers=t}).catch(function(t){return e.error=t})}).catch(function(t){return e.error=t})},e=__decorate([n.autoinject,__metadata("design:paramtypes",[i.LoginService,r.Router,s.State,o.Settings])],e)}();t.Login=c}),define("resources/index",["require","exports"],function(e,t){"use strict";function n(e){}t.configure=n}),define("aurelia-validation/validate-binding-behavior",["require","exports","aurelia-dependency-injection","aurelia-pal","aurelia-task-queue","./validation-controller","./validate-trigger"],function(e,t,n,r,i,o,s){"use strict";var a=function(){function e(e){this.taskQueue=e}return e.prototype.getTarget=function(e,t){var n=e.target;if(n instanceof Element)return n;for(var i=0,o=t.controllers.length;i<o;i++){var s=t.controllers[i];if(s.viewModel===n){var a=s.container.get(r.DOM.Element);if(a)return a;throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')}}throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')},e.prototype.bind=function(e,t,r,i){var a,c=this,u=this.getTarget(e,t);if(r instanceof o.ValidationController?a=r:(a=t.container.get(n.Optional.of(o.ValidationController)),i=r),null===a)throw new Error("A ValidationController has not been registered.");a.registerBinding(e,u,i),e.validationController=a,a.validateTrigger===s.validateTrigger.change?(e.standardUpdateSource=e.updateSource,e.updateSource=function(e){this.standardUpdateSource(e),this.validationController.validateBinding(this)}):a.validateTrigger===s.validateTrigger.blur&&(e.validateBlurHandler=function(){c.taskQueue.queueMicroTask(function(){return a.validateBinding(e)})},e.validateTarget=u,u.addEventListener("blur",e.validateBlurHandler)),a.validateTrigger!==s.validateTrigger.manual&&(e.standardUpdateTarget=e.updateTarget,e.updateTarget=function(e){this.standardUpdateTarget(e),this.validationController.resetBinding(this)})},e.prototype.unbind=function(e){e.standardUpdateSource&&(e.updateSource=e.standardUpdateSource,e.standardUpdateSource=null),e.standardUpdateTarget&&(e.updateTarget=e.standardUpdateTarget,e.standardUpdateTarget=null),e.validateBlurHandler&&(e.validateTarget.removeEventListener("blur",e.validateBlurHandler),e.validateBlurHandler=null,e.validateTarget=null),e.validationController.unregisterBinding(e),e.validationController=null},e.inject=[i.TaskQueue],e}();t.ValidateBindingBehavior=a}),define("aurelia-validation/validation-controller",["require","exports","./validator","./validate-trigger","./property-info","./validation-error"],function(e,t,n,r,i,o){"use strict";var s=function(){function e(e){this.validator=e,this.bindings=new Map,this.renderers=[],this.errors=[],this.validating=!1,this.elements=new Map,this.objects=new Map,this.validateTrigger=r.validateTrigger.blur,this.finishValidating=Promise.resolve()}return e.prototype.addObject=function(e,t){this.objects.set(e,t)},e.prototype.removeObject=function(e){this.objects.delete(e),this.processErrorDelta("reset",this.errors.filter(function(t){return t.object===e}),[])},e.prototype.addError=function(e,t,n){var r=new o.ValidationError({},e,t,n);return this.processErrorDelta("validate",[],[r]),r},e.prototype.removeError=function(e){this.errors.indexOf(e)!==-1&&this.processErrorDelta("reset",[e],[])},e.prototype.addRenderer=function(e){var t=this;this.renderers.push(e),e.render({kind:"validate",render:this.errors.map(function(e){return{error:e,elements:t.elements.get(e)}}),unrender:[]})},e.prototype.removeRenderer=function(e){var t=this;this.renderers.splice(this.renderers.indexOf(e),1),e.render({kind:"reset",render:[],unrender:this.errors.map(function(e){return{error:e,elements:t.elements.get(e)}})})},e.prototype.registerBinding=function(e,t,n){this.bindings.set(e,{target:t,rules:n})},e.prototype.unregisterBinding=function(e){this.resetBinding(e),this.bindings.delete(e)},e.prototype.getInstructionPredicate=function(e){if(e){var t,n=e.object,r=e.propertyName,i=e.rules;return t=e.propertyName?function(e){return e.object===n&&e.propertyName===r}:function(e){return e.object===n},i&&i.indexOf?function(e){return t(e)&&i.indexOf(e.rule)!==-1}:t}return function(){return!0}},e.prototype.validate=function(e){var t,n=this;if(e){var r=e.object,o=e.propertyName,s=e.rules;s=s||this.objects.get(r),t=void 0===e.propertyName?function(){return n.validator.validateObject(r,s)}:function(){return n.validator.validateProperty(r,o,s)}}else t=function(){for(var e=[],t=0,r=Array.from(n.objects);t<r.length;t++){var o=r[t],s=o[0],a=o[1];e.push(n.validator.validateObject(s,a))}for(var c=0,u=Array.from(n.bindings);c<u.length;c++){var l=u[c],f=l[0],a=l[1].rules,d=i.getPropertyInfo(f.sourceExpression,f.source),s=d.object,p=d.propertyName;n.objects.has(s)||e.push(n.validator.validateProperty(s,p,a))}return Promise.all(e).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])})};this.validating=!0;var a=this.finishValidating.then(t).then(function(t){var r=n.getInstructionPredicate(e),i=n.errors.filter(r);return n.processErrorDelta("validate",i,t),a===n.finishValidating&&(n.validating=!1),t}).catch(function(e){return n.validating=!1,n.finishValidating=Promise.resolve(),Promise.reject(e)});return this.finishValidating=a,a},e.prototype.reset=function(e){var t=this.getInstructionPredicate(e),n=this.errors.filter(t);this.processErrorDelta("reset",n,[])},e.prototype.getAssociatedElements=function(e){for(var t=e.object,n=e.propertyName,r=[],o=0,s=Array.from(this.bindings);o<s.length;o++){var a=s[o],c=a[0],u=a[1].target,l=i.getPropertyInfo(c.sourceExpression,c.source),f=l.object,d=l.propertyName;f===t&&d===n&&r.push(u)}return r},e.prototype.processErrorDelta=function(e,t,n){var r={kind:e,render:[],unrender:[]};n=n.slice(0);for(var i=function(e){var t=o.elements.get(e);o.elements.delete(e),r.unrender.push({error:e,elements:t});var i=n.findIndex(function(t){return t.rule===e.rule&&t.object===e.object&&t.propertyName===e.propertyName});if(i===-1)o.errors.splice(o.errors.indexOf(e),1);else{var s=n.splice(i,1)[0],a=o.getAssociatedElements(s);o.elements.set(s,a),r.render.push({error:s,elements:a}),o.errors.splice(o.errors.indexOf(e),1,s)}},o=this,s=0,a=t;s<a.length;s++){var c=a[s];i(c)}for(var u=0,l=n;u<l.length;u++){var f=l[u],d=this.getAssociatedElements(f);r.render.push({error:f,elements:d}),this.elements.set(f,d),this.errors.push(f)}for(var p=0,h=this.renderers;p<h.length;p++){var v=h[p];v.render(r)}},e.prototype.validateBinding=function(e){if(e.isBound){var t=i.getPropertyInfo(e.sourceExpression,e.source),n=t.object,r=t.propertyName,o=this.bindings.get(e),s=o?o.rules:void 0;this.validate({object:n,propertyName:r,rules:s})}},e.prototype.resetBinding=function(e){var t=i.getPropertyInfo(e.sourceExpression,e.source),n=t.object,r=t.propertyName;this.reset({object:n,propertyName:r})},e.inject=[n.Validator],e}();t.ValidationController=s}),define("aurelia-validation/validator",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.Validator=n}),define("aurelia-validation/validate-trigger",["require","exports"],function(e,t){"use strict";t.validateTrigger={blur:"blur",change:"change",manual:"manual"}}),define("aurelia-validation/property-info",["require","exports","aurelia-binding"],function(e,t,n){"use strict";function r(e,t,n){var r=t.evaluate(n,null);if(null!==r&&("object"==typeof r||"function"==typeof r))return r;throw null===r?r="null":void 0===r&&(r="undefined"),new Error("The '"+t+"' part of '"+e+"' evaluates to "+r+" instead of an object.")}function i(e,t){for(var i=e;e instanceof n.BindingBehavior||e instanceof n.ValueConverter;)e=e.expression;var o,s;if(e instanceof n.AccessScope)o=t.bindingContext,s=e.name;else if(e instanceof n.AccessMember)o=r(i,e.object,t),s=e.name;else{if(!(e instanceof n.AccessKeyed))throw new Error("Expression '"+i+"' is not compatible with the validate binding-behavior.");o=r(i,e.object,t),s=e.key.evaluate(t)}return{object:o,propertyName:s}}t.getPropertyInfo=i}),define("aurelia-validation/validation-error",["require","exports"],function(e,t){"use strict";var n=function(){function e(t,n,r,i){void 0===i&&(i=null),this.rule=t,this.message=n,this.object=r,this.propertyName=i,this.id=e.nextId++}return e.prototype.toString=function(){return this.message},e.nextId=0,e}();t.ValidationError=n}),define("aurelia-validation/validation-controller-factory",["require","exports","./validation-controller"],function(e,t,n){"use strict";var r=function(){function e(e){this.container=e}return e.get=function(t){return new e(t)},e.prototype.create=function(){return this.container.invoke(n.ValidationController)},e.prototype.createForCurrentScope=function(){var e=this.create();return this.container.registerInstance(n.ValidationController,e),e},e}();t.ValidationControllerFactory=r,r["protocol:aurelia:resolver"]=!0});var __decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};define("aurelia-validation/validation-errors-custom-attribute",["require","exports","aurelia-binding","aurelia-dependency-injection","aurelia-templating","./validation-controller"],function(e,t,n,r,i,o){"use strict";var s=function(){function e(e,t){this.boundaryElement=e,this.controllerAccessor=t,this.errors=[]}return e.prototype.sort=function(){this.errors.sort(function(e,t){return e.targets[0]===t.targets[0]?0:2&e.targets[0].compareDocumentPosition(t.targets[0])?1:-1})},e.prototype.interestingElements=function(e){var t=this;return e.filter(function(e){return t.boundaryElement.contains(e)})},e.prototype.render=function(e){for(var t=function(e){var t=n.errors.findIndex(function(t){return t.error===e});t!==-1&&n.errors.splice(t,1)},n=this,r=0,i=e.unrender;r<i.length;r++){var o=i[r].error;t(o)}for(var s=0,a=e.render;s<a.length;s++){var c=a[s],o=c.error,u=c.elements,l=this.interestingElements(u);l.length&&this.errors.push({error:o,targets:l})}this.sort(),this.value=this.errors},e.prototype.bind=function(){this.controllerAccessor().addRenderer(this),this.value=this.errors},e.prototype.unbind=function(){this.controllerAccessor().removeRenderer(this)},e.inject=[Element,r.Lazy.of(o.ValidationController)],e=__decorate([i.customAttribute("validation-errors",n.bindingMode.twoWay)],e)}();t.ValidationErrorsCustomAttribute=s}),define("aurelia-validation/validation-renderer-custom-attribute",["require","exports","./validation-controller"],function(e,t,n){"use strict";var r=function(){function e(){}return e.prototype.created=function(e){this.container=e.container},e.prototype.bind=function(){this.controller=this.container.get(n.ValidationController),this.renderer=this.container.get(this.value),this.controller.addRenderer(this.renderer)},e.prototype.unbind=function(){this.controller.removeRenderer(this.renderer),this.controller=null,this.renderer=null},e}();t.ValidationRendererCustomAttribute=r}),define("aurelia-validation/implementation/rules",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.set=function(t,n){t instanceof Function&&(t=t.prototype),Object.defineProperty(t,e.key,{enumerable:!1,configurable:!1,writable:!0,value:n})},e.unset=function(t){t instanceof Function&&(t=t.prototype),t[e.key]=null},e.get=function(t){return t[e.key]||null},e.key="__rules__",e}();t.Rules=n});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("aurelia-validation/implementation/standard-validator",["require","exports","aurelia-templating","../validator","../validation-error","./rules","./validation-messages"],function(e,t,n,r,i,o,s){"use strict";var a=function(e){function t(t,n){e.call(this),this.messageProvider=t,this.lookupFunctions=n.lookupFunctions,this.getDisplayName=t.getDisplayName.bind(t)}return __extends(t,e),t.prototype.getMessage=function(e,t,n){var r=e.message||this.messageProvider.getMessage(e.messageKey),i=e.property,o=i.name,s=i.displayName;null===s&&null!==o&&(s=this.messageProvider.getDisplayName(o));var a={$displayName:s,$propertyName:o,$value:n,$object:t,$config:e.config,$getDisplayName:this.getDisplayName};return r.evaluate({bindingContext:t,overrideContext:a},this.lookupFunctions)},t.prototype.validate=function(e,t,n){var r=this,s=[];if(n||(n=o.Rules.get(e)),!n)return Promise.resolve(s);for(var a=null===t||void 0===t,c=function(t,n){var o=r.getMessage(t,e,n);s.push(new i.ValidationError(t,o,e,t.property.name))},u=[],l=function(r){var i=n[r];if(!a&&i.property.name!==t)return"continue";if(i.when&&!i.when(e))return"continue";var o=null===i.property.name?e:e[i.property.name],s=i.condition(o,e);return s instanceof Promise?(u.push(s.then(function(e){e||c(i,o)})),"continue"):void(s||c(i,o))},f=0;f<n.length;f++)l(f);return 0===u.length?Promise.resolve(s):Promise.all(u).then(function(){return s})},t.prototype.validateProperty=function(e,t,n){return this.validate(e,t,n||null)},t.prototype.validateObject=function(e,t){return this.validate(e,null,t||null)},t.inject=[s.ValidationMessageProvider,n.ViewResources],t}(r.Validator);t.StandardValidator=a}),define("aurelia-validation/implementation/validation-messages",["require","exports","./validation-parser"],function(e,t,n){"use strict";t.validationMessages={default:"${$displayName} is invalid.",required:"${$displayName} is required.",matches:"${$displayName} is not correctly formatted.",email:"${$displayName} is not a valid email.",minLength:"${$displayName} must be at least ${$config.length} character${$config.length === 1 ? '' : 's'}.",maxLength:"${$displayName} cannot be longer than ${$config.length} character${$config.length === 1 ? '' : 's'}.",minItems:"${$displayName} must contain at least ${$config.count} item${$config.count === 1 ? '' : 's'}.",maxItems:"${$displayName} cannot contain more than ${$config.count} item${$config.count === 1 ? '' : 's'}.",equals:"${$displayName} must be ${$config.expectedValue}."};var r=function(){function e(e){this.parser=e}return e.prototype.getMessage=function(e){var n;return n=e in t.validationMessages?t.validationMessages[e]:t.validationMessages.default,this.parser.parseMessage(n)},e.prototype.getDisplayName=function(e){var t=e.split(/(?=[A-Z])/).join(" ");return t.charAt(0).toUpperCase()+t.slice(1)},e.inject=[n.ValidationParser],e}();t.ValidationMessageProvider=r});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("aurelia-validation/implementation/validation-parser",["require","exports","aurelia-binding","aurelia-templating","./util","aurelia-logging"],function(e,t,n,r,i,o){"use strict";var s=function(){function e(e,t){this.parser=e,this.bindinqLanguage=t,this.emptyStringExpression=new n.LiteralString(""),this.nullExpression=new n.LiteralPrimitive(null),this.undefinedExpression=new n.LiteralPrimitive(void 0),this.cache={}}return e.prototype.coalesce=function(e){return new n.Conditional(new n.Binary("||",new n.Binary("===",e,this.nullExpression),new n.Binary("===",e,this.undefinedExpression)),this.emptyStringExpression,new n.CallMember(e,"toString",[]))},e.prototype.parseMessage=function(e){if(void 0!==this.cache[e])return this.cache[e];var t=this.bindinqLanguage.parseInterpolation(null,e);if(null===t)return new n.LiteralString(e);for(var r=new n.LiteralString(t[0]),i=1;i<t.length;i+=2)r=new n.Binary("+",r,new n.Binary("+",this.coalesce(t[i]),new n.LiteralString(t[i+1])));return a.validate(r,e),this.cache[e]=r,r},e.prototype.getAccessorExpression=function(e){var t=/^function\s*\([$_\w\d]+\)\s*\{\s*(?:"use strict";)?\s*return\s+[$_\w\d]+\.([$_\w\d]+)\s*;?\s*\}$/,n=/^[$_\w\d]+\s*=>\s*[$_\w\d]+\.([$_\w\d]+)$/,r=t.exec(e)||n.exec(e);if(null===r)throw new Error("Unable to parse accessor function:\n"+e);return this.parser.parse(r[1])},e.prototype.parseProperty=function(e){var t;if(t=i.isString(e)?this.parser.parse(e):this.getAccessorExpression(e.toString()),t instanceof n.AccessScope||t instanceof n.AccessMember&&t.object instanceof n.AccessScope)return{name:t.name,displayName:null};throw new Error('Invalid subject: "'+t+'"')},e.inject=[n.Parser,r.BindingLanguage],e}();t.ValidationParser=s;var a=function(e){function t(t){e.call(this,[]),this.originalMessage=t}return __extends(t,e),t.validate=function(e,n){var r=new t(n);e.accept(r)},t.prototype.visitAccessScope=function(e){if(0!==e.ancestor)throw new Error("$parent is not permitted in validation message expressions.");["displayName","propertyName","value","object","config","getDisplayName"].indexOf(e.name)!==-1&&o.getLogger("aurelia-validation").warn('Did you mean to use "$'+e.name+'" instead of "'+e.name+'" in this validation message template: "'+this.originalMessage+'"?')},t}(n.Unparser);t.MessageExpressionValidator=a}),define("aurelia-validation/implementation/util",["require","exports"],function(e,t){"use strict";function n(e){return"[object String]"===Object.prototype.toString.call(e)}t.isString=n}),define("aurelia-validation/implementation/validation-rules",["require","exports","./util","./rules","./validation-messages"],function(e,t,n,r,i){"use strict";var o=function(){function e(e,t,n,r,i,o){void 0===n&&(n={}),this.fluentEnsure=r,this.fluentRules=i,this.parser=o,this.rule={property:e,condition:t,config:n,when:null,messageKey:"default",message:null},this.fluentEnsure.rules.push(this.rule)}return e.prototype.withMessageKey=function(e){return this.rule.messageKey=e,this.rule.message=null,this},e.prototype.withMessage=function(e){return this.rule.messageKey="custom",this.rule.message=this.parser.parseMessage(e),this},e.prototype.when=function(e){return this.rule.when=e,this},e.prototype.tag=function(e){return this.rule.tag=e,this},e.prototype.ensure=function(e){return this.fluentEnsure.ensure(e)},e.prototype.ensureObject=function(){return this.fluentEnsure.ensureObject()},Object.defineProperty(e.prototype,"rules",{get:function(){return this.fluentEnsure.rules},enumerable:!0,configurable:!0}),e.prototype.on=function(e){return this.fluentEnsure.on(e)},e.prototype.satisfies=function(e,t){return this.fluentRules.satisfies(e,t)},e.prototype.satisfiesRule=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return(r=this.fluentRules).satisfiesRule.apply(r,[e].concat(t));var r},e.prototype.required=function(){return this.fluentRules.required()},e.prototype.matches=function(e){return this.fluentRules.matches(e)},e.prototype.email=function(){return this.fluentRules.email()},e.prototype.minLength=function(e){return this.fluentRules.minLength(e)},e.prototype.maxLength=function(e){return this.fluentRules.maxLength(e)},e.prototype.minItems=function(e){return this.fluentRules.minItems(e)},e.prototype.maxItems=function(e){return this.fluentRules.maxItems(e)},e.prototype.equals=function(e){return this.fluentRules.equals(e)},e}();t.FluentRuleCustomizer=o;var s=function(){function e(e,t,n){this.fluentEnsure=e,this.parser=t,this.property=n}return e.prototype.displayName=function(e){return this.property.displayName=e,this},e.prototype.satisfies=function(e,t){return new o(this.property,e,t,this.fluentEnsure,this,this.parser)},e.prototype.satisfiesRule=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=e.customRules[t];if(!o){if(o=this[t],o instanceof Function)return o.call.apply(o,[this].concat(r));throw new Error('Rule with name "'+t+'" does not exist.')}var s=o.argsToConfig?o.argsToConfig.apply(o,r):void 0;return this.satisfies(function(e,t){return(i=o.condition).call.apply(i,[n,e,t].concat(r));var i},s).withMessageKey(t)},e.prototype.required=function(){return this.satisfies(function(e){return null!==e&&void 0!==e&&!(n.isString(e)&&!/\S/.test(e))}).withMessageKey("required")},e.prototype.matches=function(e){return this.satisfies(function(t){return null===t||void 0===t||0===t.length||e.test(t)}).withMessageKey("matches")},e.prototype.email=function(){return this.matches(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/).withMessageKey("email")},e.prototype.minLength=function(e){return this.satisfies(function(t){return null===t||void 0===t||0===t.length||t.length>=e},{length:e}).withMessageKey("minLength")},e.prototype.maxLength=function(e){return this.satisfies(function(t){return null===t||void 0===t||0===t.length||t.length<=e},{length:e}).withMessageKey("maxLength")},e.prototype.minItems=function(e){return this.satisfies(function(t){return null===t||void 0===t||t.length>=e},{count:e}).withMessageKey("minItems")},e.prototype.maxItems=function(e){return this.satisfies(function(t){return null===t||void 0===t||t.length<=e},{count:e}).withMessageKey("maxItems")},e.prototype.equals=function(e){return this.satisfies(function(t){return null===t||void 0===t||""===t||t===e},{expectedValue:e}).withMessageKey("equals")},e.customRules={},e}();t.FluentRules=s;var a=function(){function e(e){this.parser=e,this.rules=[]}return e.prototype.ensure=function(e){return this.assertInitialized(),new s(this,this.parser,this.parser.parseProperty(e))},e.prototype.ensureObject=function(){return this.assertInitialized(),new s(this,this.parser,{name:null,displayName:null})},e.prototype.on=function(e){return r.Rules.set(e,this.rules),this},e.prototype.assertInitialized=function(){if(!this.parser)throw new Error('Did you forget to add ".plugin(\'aurelia-validation)" to your main.js?')},e}();t.FluentEnsure=a;var c=function(){function e(){}return e.initialize=function(t){e.parser=t},e.ensure=function(t){return new a(e.parser).ensure(t)},e.ensureObject=function(){return new a(e.parser).ensureObject()},e.customRule=function(e,t,n,r){i.validationMessages[e]=n,s.customRules[e]={condition:t,argsToConfig:r}},e.taggedRules=function(e,t){return e.filter(function(e){return e.tag===t})},e.off=function(e){r.Rules.unset(e)},e}();t.ValidationRules=c}),define("text!app.html",["module"],function(e){e.exports='<template>\r\n    <require from="./css/site.css"></require>\r\n    <div class="navbar navbar-default navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\r\n                    <span class="icon-bar menu"></span>\r\n                    <span class="icon-bar menu"></span>\r\n                    <span class="icon-bar menu"></span>\r\n                </button>\r\n                <button type="button" class="navbar-brand title" click.delegate="home()">\r\n                    <img src="favicon.ico" />\r\n                    chatle\r\n                </button>                \r\n            </div>\r\n            <div class="navbar-collapse collapse">\r\n                <ul class="nav navbar-nav" if.bind="isConnected">\r\n                    <li click.delegate="manage()"><a>Welcom ${userName}!</a></li>\r\n                    <li click.delegate="logoff()"><a>Log off</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="container body-content">\r\n        <div if.bind="errorMessage" class="text-danger">\r\n            <ul>\r\n                <li>${errorMessage}</li>\r\n            </ul>\r\n        </div>\r\n        <router-view></router-view>\r\n    </div>\r\n    <footer>\r\n        <p>&copy; 2016 - chatle</p>\r\n    </footer>\r\n</template>\r\n'}),define("text!css/site.css",["module"],function(e){e.exports="html {\r\n    font-family: cursive\r\n}\r\n/* Move down content because we have a fixed navbar that is 50px tall */\r\nbody.chatle {\r\n    padding-top: 50px;\r\n    padding-bottom: 20px;\r\n}\r\n\r\n/* Wrapping element */\r\n/* Set some basic padding to keep content from hitting the edges */\r\n.body-content {\r\n    padding-left: 15px;\r\n    padding-right: 15px;\r\n}\r\n\r\n.navbar.navbar-default {\r\n    background-color: #000;\r\n}\r\n\r\nbutton.navbar-brand {\r\n    background-color: transparent;\r\n    border: 0;\r\n}\r\n\r\nbutton.navbar-brand > img {\r\n    display: inline-block;\r\n    height: 20px;\r\n    border-radius: 7px;\r\n}\r\n\r\n.title.navbar-brand:focus,\r\n.title.navbar-brand:hover,\r\n.nav.navbar-nav > li > a:hover {\r\n    color: #fff;    \r\n}\r\n\r\nli:hover {\r\n    cursor: pointer;\r\n}\r\n\r\n/* Set widths on the form inputs since otherwise they're 100% wide */\r\ninput,\r\nselect,\r\ntextarea {\r\n    max-width: 280px;\r\n}\r\n\r\nul\r\n{\r\n    padding-left: 0;\r\n    list-style-type: none;\r\n}\r\n\r\nsmall {\r\n    color: #666666;\r\n}\r\n\r\n/* Responsive: Portrait tablets and up */\r\n@media screen and (min-width: 768px) {\r\n    .jumbotron {\r\n        margin-top: 20px;\r\n    }\r\n\r\n    .body-content {\r\n        padding: 0;\r\n    }\r\n}\r\n\r\n.list-group-item,\r\n.list-group-item:first-child,\r\n.list-group-item:last-child {\r\n    border: 0;\r\n    padding: 0;\r\n    border-radius: 0;\r\n}\r\n\r\n.list-group-item:hover {\r\n    padding-right: 4px;\r\n    padding-left: 4px;\r\n}\r\n\r\n.list-group-item.active {\r\n    background-color: #fff;\r\n    border-top: 1px solid #ccc;\r\n    border-bottom: 1px solid #ccc;\r\n}\r\n\r\n.list-group-item.active:hover {\r\n    background-color: #fff;    \r\n    border-color: #333;\r\n}\r\n\r\n.list-group-item.active span {\r\n    color: #333;\r\n}";
}),define("text!components/contact-list.html",["module"],function(e){e.exports='<template>\r\n  <require from="./contact"></require>\r\n  <div class="contact-list">\r\n    <span if.bind="!users">${loadingMessage}</span>\r\n    <ul class="list-group" if.bind="users">\r\n      <contact repeat.for="user of users" user.bind="user"></contact>\r\n    </ul>\r\n  </div>\r\n</template>'}),define("text!css/site.min.css",["module"],function(e){e.exports="html{font-family:cursive}body{padding-top:50px;padding-bottom:20px}.console{font-family:'Lucida Console',Monaco,monospace}.body-content{padding-left:15px;padding-right:15px}.navbar.navbar-default{background-color:#fff}.nav.navbar-nav>li>a:hover,.title.navbar-brand:focus,.title.navbar-brand:hover{color:#222}input,select,textarea{max-width:280px}ul{padding-left:0;list-style-type:none}small{color:#666}@media screen and (min-width:768px){.jumbotron{margin-top:20px}.body-content{padding:0}}"}),define("text!components/contact.html",["module"],function(e){e.exports='<template>\r\n    <li class="list-group-item ${isSelected ? \'active\' : \'\'}" click.delegate="select()" desabled="isCurrentUser"><a>${user.id}</a></li>\r\n</template>'}),define("text!components/conversation-component.html",["module"],function(e){e.exports='<template>\r\n    <div if.bind="conversation">\r\n        <h6>${conversation.title}</h6>\r\n        <form class="form-inline">\r\n            <input class="form-control" value.bind="message" placeholder="message...">\r\n            <button type="submit" class="btn btn-default" click.delegate="sendMessage()" disabled.bind="!message">send</button>\r\n        </form>\r\n        <ul>\r\n            <li repeat.for="message of conversation.messages">\r\n                <small>${message.from}</small><br />\r\n                <span>${message.text}</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <h1 if.bind="!conversation">WELCOME TO THIS REALLY SIMPLE CHAT</h1>\r\n</template>'}),define("text!components/conversation-list.html",["module"],function(e){e.exports='<template>\r\n  <require from="./conversation-preview"></require>\r\n  <div class="conversation-list">\r\n    <ul class="list-group">\r\n      <conversation-preview repeat.for="conversation of conversations" conversation.bind="conversation"></conversation-preview>\r\n    </ul>\r\n  </div>\r\n</template>'}),define("text!components/conversation-preview.html",["module"],function(e){e.exports="<template>\r\n  <li class=\"list-group-item ${isSelected ? 'active' : ''}\" click.delegate=\"select()\">\r\n    <a>${conversation.title}</a><br/>\r\n    <span>${lastMessage}</span>\r\n  </li>\r\n</template>"}),define("text!components/user-name.html",["module"],function(e){e.exports='<template>\r\n\t<div validation-errors.bind="userNameErrors" class.bind="userNameErrors.length ? \'has-error\' : \'\'">\r\n\t\t<input class="form-control" name="UserName" value.bind="userName & validate" />\r\n\t\t<span class="help-block" repeat.for="errorInfo of userNameErrors">\r\n            ${errorInfo.error.message}\r\n        <span>\r\n    </div>\r\n</template>>'}),define("text!pages/account.html",["module"],function(e){e.exports='<template>\r\n\t<h2>Manage Account.</h2>\r\n\t<div class="row">\r\n\t\t<template if.bind="logins.otherLogins.length > 0">\r\n\t\t\t<h4>Add another service to log in.</h4>\r\n\t\t\t<hr />\r\n\t\t\t<form method="post" class="form-horizontal" role="form" action.bind="externalLinkLogin">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<button type="submit" class="btn btn-default" name="provider" repeat.for="login of logins.otherLogins" value.bind="login.authenticationScheme"\r\n\t\t\t\t\t\t\ttitle="Log in using your ${login.displayName} account">${login.authenticationScheme}</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input name="__RequestVerificationToken" type="hidden" value.bind="token" />\r\n\t\t\t</form>\r\n\t\t</template>\r\n\t\t<template if.bind="logins.currentLogins.length > 0">\r\n\t\t\t<h4>Registered Logins</h4>\r\n\t\t\t<table class="table">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<template repeat.for="login of logins.currentLogins">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>${login.loginProvider}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<form class="form-horizontal" role="form" if.bind="logins.currentLogins.length > 1">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<input type="submit" class="btn btn-default" value="Remove" title="Remove this ${login.loginProvider} login from your account" click.delegate="remove(login.loginProvider, login.providerKey)" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</template>\r\n\t</div>\r\n</template>'}),define("text!pages/confirm.html",["module"],function(e){e.exports='<template>\r\n\t<require from="../components/user-name"></require>\r\n\t<h3>Associate your ${provider} account.</h3>\r\n\r\n\t<form class="form-horizontal" submit.delegate="confirm()">\r\n\t\t<h4>Association Form</h4>\r\n\t\t<hr />\r\n\t\t<div class="text-danger">${error.message}</div>\r\n\r\n\t\t<p class="text-info">\r\n\t\t\tYou\'ve successfully authenticated with <strong>${provider}</strong>. Please enter a user name for this site below and\r\n\t\t\tclick the Register button to finish logging in.\r\n\t\t</p>\r\n\t\t<div class="form-group">\r\n\t\t\t<label class="col-md-2 control-label" for="UserName">User name</label>\r\n\t\t\t<user-name class="col-md-10"></user-name>\r\n\t\t</div>\r\n\t\t<div class="form-group">\r\n\t\t\t<div class="col-md-offset-2 col-md-10">\r\n\t\t\t\t<button type="submit" class="btn btn-default">Register</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</form>\r\n\r\n</template>'}),define("text!pages/home.html",["module"],function(e){e.exports='<template>\r\n    <require from="../components/contact-list"></require>\r\n    <require from="../components/conversation-list"></require>\r\n\r\n    <div class="row">\r\n        <div class="col-xs-3">\r\n            <h6>CONVERSATION</h6>\r\n            <conversation-list></conversation-list>\r\n        </div>\r\n        <router-view class="col-xs-6"></router-view>\r\n        <div class="col-xs-3">\r\n            <h6>CONNECTED</h6>\r\n            <contact-list></contact-list>\r\n        </div>\r\n    </div>\r\n</template>'}),define("text!pages/login.html",["module"],function(e){e.exports='<template>\r\n\t<require from="../components/user-name"></require>\r\n\r\n\t<h2>Log in.</h2>\r\n\t<hr />\r\n\t<div class="col-xs-6">\r\n\t\t<section>\r\n\t\t\t<h4>Guess access.</h4>\r\n\t\t\t<hr>\r\n\t\t\t<span if.bind="!providers">loading...</span>\r\n\t\t\t<form class="form-horizontal" if.bind="providers">\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<label class="col-xs-3 control-label" for="userName"></label>\r\n\t\t\t\t\t<user-name class="col-xs-9"></user-name>\r\n\t\t\t\t\t<span class="help-block">\r\n            \t\t\t${error.message}\r\n        \t\t\t<span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<div class="col-xs-offset-3 col-xs-9">\r\n\t\t\t\t\t\t<input type="submit" value="Log in" class="btn btn-default" click.delegate="login(userName)" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</section>\r\n\t</div>\r\n\t<div class="col-xs-6">\r\n\t\t<section>\r\n\t\t\t<h4>Use another service to log in.</h4>\r\n\t\t\t<hr>\r\n\t\t\t<form class="form-horizontal" role="form" method="post" action.bind="externalLogin">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<button type="submit" class="btn btn-default" name="provider" repeat.for="provider of providers" value.bind="provider.authenticationScheme" title="Log in using your ${provider.displayName} account">${provider.displayName}</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input name="__RequestVerificationToken" type="hidden" value.bind="token"></form>\r\n\t\t</section>\r\n\t</div>\r\n</template>'});
//# sourceMappingURL=app-bundle.js.map